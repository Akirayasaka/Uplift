@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div id="admin_Index">
    <div class="border backgroundWhite">
        <div class="row">
            <div class="col-6">
                <h2 class="text-primary">Category List</h2>
            </div>
            <div class="col-6">
                <a asp-action="Upsert" class="btn btn-primary"><i class="fas fa-plus"></i> &nbsp; Create New Category</a>
            </div>
        </div>

        <br />
        <br />

        <table id="dataTable" class="table table-striped table-bordered w-100">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Display Order</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="item in objectData.responseData.list">
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>


@section Scripts{
<script>
    const { ref, reactive, onMounted, createApp } = Vue;
    createApp({
        setup() {
            const objectData = reactive({
                token: "",
                datePeriod: {
                    start: "",
                    end: ""
                },
                responseData: {
                    list: []
                },
                dto: {}
            });

            const fetchData = () => {
                $('#dataTable').DataTable().destroy();
                axios.get("/admin/category/GetAll").then((s)=>{
                    console.log(s);
                }).catch((err)=>{console.log(err)}).finally(()=>{ DtInit();});
            }

            onMounted(() => {
                fetchData();
            });

            return {
                objectData
            }
        }
    }).mount('#admin_Index');

    // #region [表格初始化]
    function DtInit() {
        $('#dataTable').DataTable({
            language: {
                url: "@Url.Content("~/lib/datatable/CHT.json")"
            },
            //lengthMenu: [[15, 50, -1], [15, 50, "全部"]],
            lengthMenu: [[-1], ["全部"]],
            columnDefs: [
                { "width": "50%", "targets": 0 },
                { "width": "30%", "targets": 1 },
                { "width": "20%", "targets": 2, "orderable": false }
            ],
            dom: "ftip",
            //ordering: false,
            deferRender: true,
            autoWidth: false,
            destroy: true,
            retrieve: true,
            initComplete: function() {
                //$("#area").show();
            },
            footerCallback: function() {}
        });
    }
    // #endregion


    //$(()=>{
    //    fetchData()
    //});

    //function fetchData() {
    //    axios.get("/admin/category/GetAll").then((s)=>{
    //        console.log(s);
    //    }).catch((err)=>{console.log(err)});
    //}

    //function DtInit() {
    //    $("#dataTable").DataTable({

    //    });
    //}
</script>
}